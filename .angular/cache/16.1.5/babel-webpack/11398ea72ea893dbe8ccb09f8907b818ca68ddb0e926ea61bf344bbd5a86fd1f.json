{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { debounceTime, map } from 'rxjs';\nexport let StudentListComponent = class StudentListComponent {\n  // private searchTerms = new Observable<string>();\n  // searchResults$ = this.searchTerms.pipe(\n  //   debounceTime(300), // ממתין 300 מילי-שניות אחרי הקלדה לפני ביצוע החיפוש\n  //   distinctUntilChanged(), // לא מבצע חיפוש אם הערך שונה מהחיפוש הקודם\n  //   switchMap((term: string) => this._studentService.searchStudents(term))\n  // );\n  // search(term: Student): void {\n  //   this.searchTerms.next(term);\n  // }\n  search(name) {\n    this._studentService.getFromServer().pipe(map(i => i.currentTarget.value), debounceTime(500)).subscribe(data => {\n      this.students = data;\n    });\n  }\n  showTest(tests, id) {\n    if (tests != undefined) {\n      this.selectedTest = tests;\n      this.idS = id;\n    }\n  }\n  delettest(tests) {\n    if (tests != undefined) {\n      this.selectedTest = undefined;\n    }\n  }\n  addStudent() {\n    this._router.navigate([\"/addStudent\"]);\n  }\n  getFromServer() {\n    this._studentService.getFromServer().subscribe(data => {\n      this.students = data;\n    });\n  }\n  getFromServerByActive(active) {\n    this._studentService.getFromServerByActive(active).subscribe(data => {\n      this.students = data;\n    });\n  }\n  deletFromServer(idS) {\n    this._studentService.deletFromServer(idS).subscribe(data => {\n      if (data) {\n        for (let s of this.students) {\n          if (s.idS == idS) {\n            let studentToDeleate = s;\n            let studentToDeleate1 = this.students.indexOf(studentToDeleate);\n            this.students.splice(studentToDeleate1, 1);\n          }\n        }\n      }\n    }, err => {\n      alert(err);\n    });\n  }\n  constructor(_studentService, _router) {\n    this._studentService = _studentService;\n    this._router = _router;\n  }\n  ngOnInit() {\n    this.getFromServer();\n  }\n};\nStudentListComponent = __decorate([Component({\n  selector: 'student-list',\n  templateUrl: './student-list.component.html'\n})], StudentListComponent);","map":{"version":3,"names":["Component","debounceTime","map","StudentListComponent","search","name","_studentService","getFromServer","pipe","i","currentTarget","value","subscribe","data","students","showTest","tests","id","undefined","selectedTest","idS","delettest","addStudent","_router","navigate","getFromServerByActive","active","deletFromServer","s","studentToDeleate","studentToDeleate1","indexOf","splice","err","alert","constructor","ngOnInit","__decorate","selector","templateUrl"],"sources":["C:\\Users\\user1\\Desktop\\angular\\angular_p\\src\\app\\modules\\student\\components\\student-list\\student-list.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Student, Years } from '../../models/student.model';\nimport { Test } from '../../models/test.model';\nimport { StudentService } from '../../student.service';\nimport { Router } from '@angular/router';\nimport { Observable, Subject, debounceTime, distinctUntilChanged, map, switchMap } from 'rxjs';\n\n@Component({\n  selector: 'student-list',\n  templateUrl: './student-list.component.html'\n\n})\nexport class StudentListComponent {\n\n  students!: Student[];\n  selectedTest!: Test[]|undefined;\n  newStudent!: boolean;\n  idS!:number;\n  \n  // private searchTerms = new Observable<string>();\n  // searchResults$ = this.searchTerms.pipe(\n  //   debounceTime(300), // ממתין 300 מילי-שניות אחרי הקלדה לפני ביצוע החיפוש\n  //   distinctUntilChanged(), // לא מבצע חיפוש אם הערך שונה מהחיפוש הקודם\n  //   switchMap((term: string) => this._studentService.searchStudents(term))\n  // );\n  // search(term: Student): void {\n  //   this.searchTerms.next(term);\n  // }\n  search(name:string){\n    this._studentService.getFromServer().pipe(\n      map((i: any) => i.currentTarget.value),\n      debounceTime(500)\n    ).subscribe(data=>{\n      this.students=data;\n     });\n  };\n  showTest(tests: Test[]| undefined,id:number) {\n    if(tests!=undefined){\n    this.selectedTest = tests;\n    this.idS=id;\n\n    }\n    }\n    delettest(tests: Test[]| undefined){\n      if(tests!=undefined){\n        this.selectedTest = undefined;\n    \n        }\n    }\n  addStudent() {\n      this._router.navigate([\"/addStudent\"]);\n     \n  }\n\n  getFromServer(){\n    this._studentService.getFromServer().subscribe(data=>{\n      this.students=data;\n     });\n  }\n  \n  getFromServerByActive(active:boolean){\n    this._studentService.getFromServerByActive(active).subscribe(data=>{\n      this.students=data;\n    });\n  }\n\n  deletFromServer(idS:number){\n    this._studentService.deletFromServer(idS).subscribe(data=>{\n      if (data) {\n        for (let s of this.students) {\n          if (s.idS == idS) {\n            let studentToDeleate = s;\n            let studentToDeleate1 = this.students.indexOf(studentToDeleate);\n            this.students.splice(studentToDeleate1, 1);\n          }\n        }\n      }\n    },err=>{\n      alert(err);\n    })\n\n  }\n\n  constructor(private _studentService: StudentService,private _router:Router) {\n  }\n\n  ngOnInit(){\n    this.getFromServer();\n  }\n}\n\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAKzC,SAA8BC,YAAY,EAAwBC,GAAG,QAAmB,MAAM;AAOvF,WAAMC,oBAAoB,GAA1B,MAAMA,oBAAoB;EAO/B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC,MAAMA,CAACC,IAAW;IAChB,IAAI,CAACC,eAAe,CAACC,aAAa,EAAE,CAACC,IAAI,CACvCN,GAAG,CAAEO,CAAM,IAAKA,CAAC,CAACC,aAAa,CAACC,KAAK,CAAC,EACtCV,YAAY,CAAC,GAAG,CAAC,CAClB,CAACW,SAAS,CAACC,IAAI,IAAE;MAChB,IAAI,CAACC,QAAQ,GAACD,IAAI;IACnB,CAAC,CAAC;EACL;EACAE,QAAQA,CAACC,KAAwB,EAACC,EAAS;IACzC,IAAGD,KAAK,IAAEE,SAAS,EAAC;MACpB,IAAI,CAACC,YAAY,GAAGH,KAAK;MACzB,IAAI,CAACI,GAAG,GAACH,EAAE;;EAGX;EACAI,SAASA,CAACL,KAAwB;IAChC,IAAGA,KAAK,IAAEE,SAAS,EAAC;MAClB,IAAI,CAACC,YAAY,GAAGD,SAAS;;EAGjC;EACFI,UAAUA,CAAA;IACN,IAAI,CAACC,OAAO,CAACC,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;EAE1C;EAEAjB,aAAaA,CAAA;IACX,IAAI,CAACD,eAAe,CAACC,aAAa,EAAE,CAACK,SAAS,CAACC,IAAI,IAAE;MACnD,IAAI,CAACC,QAAQ,GAACD,IAAI;IACnB,CAAC,CAAC;EACL;EAEAY,qBAAqBA,CAACC,MAAc;IAClC,IAAI,CAACpB,eAAe,CAACmB,qBAAqB,CAACC,MAAM,CAAC,CAACd,SAAS,CAACC,IAAI,IAAE;MACjE,IAAI,CAACC,QAAQ,GAACD,IAAI;IACpB,CAAC,CAAC;EACJ;EAEAc,eAAeA,CAACP,GAAU;IACxB,IAAI,CAACd,eAAe,CAACqB,eAAe,CAACP,GAAG,CAAC,CAACR,SAAS,CAACC,IAAI,IAAE;MACxD,IAAIA,IAAI,EAAE;QACR,KAAK,IAAIe,CAAC,IAAI,IAAI,CAACd,QAAQ,EAAE;UAC3B,IAAIc,CAAC,CAACR,GAAG,IAAIA,GAAG,EAAE;YAChB,IAAIS,gBAAgB,GAAGD,CAAC;YACxB,IAAIE,iBAAiB,GAAG,IAAI,CAAChB,QAAQ,CAACiB,OAAO,CAACF,gBAAgB,CAAC;YAC/D,IAAI,CAACf,QAAQ,CAACkB,MAAM,CAACF,iBAAiB,EAAE,CAAC,CAAC;;;;IAIlD,CAAC,EAACG,GAAG,IAAE;MACLC,KAAK,CAACD,GAAG,CAAC;IACZ,CAAC,CAAC;EAEJ;EAEAE,YAAoB7B,eAA+B,EAASiB,OAAc;IAAtD,KAAAjB,eAAe,GAAfA,eAAe;IAAyB,KAAAiB,OAAO,GAAPA,OAAO;EACnE;EAEAa,QAAQA,CAAA;IACN,IAAI,CAAC7B,aAAa,EAAE;EACtB;CACD;AA7EYJ,oBAAoB,GAAAkC,UAAA,EALhCrC,SAAS,CAAC;EACTsC,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE;CAEd,CAAC,C,EACWpC,oBAAoB,CA6EhC"},"metadata":{},"sourceType":"module","externalDependencies":[]}